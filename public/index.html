<!doctype html>
<html lang="en-us" class="a-no-js" data-19ax5a9jf="dingo">
<head>
    <script>var aPageStart = (new Date()).getTime();</script>
    <meta charset="utf-8" />
    <meta http-equiv='x-dns-prefetch-control' content='on'>
    <link rel="dns-prefetch" href="https://images-eu.ssl-images-amazon.com">
    <link rel="dns-prefetch" href="https://m.media-amazon.com">
    <link rel="dns-prefetch" href="https://completion.amazon.com">
    <link rel="stylesheet" href="css/style.css">
    <!-- kept original asset links (these are from your copy) -->
    <link rel="stylesheet" type="text/css" href="https://m.media-amazon.com/images/I/818tY1Jd6ZL.css?DVWebNode_commons">
    <script type="text/javascript" src="https://m.media-amazon.com/images/I/81zVkEg-zfL.js?DVWebNode_vendors" async defer crossorigin="anonymous"></script>
    <script type="text/javascript" src="https://m.media-amazon.com/images/I/915n4+2XzZL.js?DVWebNode_commons" async defer crossorigin="anonymous"></script>

    <script type="text/javascript">
        window.DVWebNode = window.DVWebNode || {};
        DVWebNode.pageType = 'ATVProfiles';
        DVWebNode.subPageType = 'SelectYourRealm';
        DVWebNode.pageTypeId = undefined;
    </script>

    <link rel="stylesheet" type="text/css" href="https://m.media-amazon.com/images/I/11FrrcrJ+yL.css?DVWebNode_payment-state-msg">
    <script type="text/javascript" src="https://m.media-amazon.com/images/I/71q-g8W7rML.js?DVWebNode_payment-state-msg" defer crossorigin="anonymous"></script>

    <link rel="stylesheet" type="text/css" href="https://m.media-amazon.com/images/I/31atgPt14VL.css?DVWebNode_conditional-site-wide">
    <script type="text/javascript" src="https://m.media-amazon.com/images/I/71hw8VJOKUL.js?DVWebNode_conditional-site-wide" defer crossorigin="anonymous"></script>

    <link rel="stylesheet" type="text/css" href="https://m.media-amazon.com/images/I/31DZWvfAm0L.css?DVWebNode_footer">
    <script type="text/javascript" src="https://m.media-amazon.com/images/I/61tLx3o73iL.js?DVWebNode_footer" defer crossorigin="anonymous"></script>

    <meta content="IE=Edge,chrome=1" http-equiv="X-UA-Compatible" />
    <meta content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=5" name="viewport" />
    <meta content="#00050d" name="theme-color" />
    <meta content="black-translucent" name="apple-mobile-web-app-status-bar-style" />
    <meta content="#111111" name="msapplication-TileColor" />
    <link href="https://m.media-amazon.com/images/G/01/digital/video/DVUI/favicons/favicon.png" rel="shortcut icon" type="image/x-icon" />
    <title>The Skald: Select Your Realm!</title>

    <!-- kept the profiles CSS and JS links you had -->
    <link rel="stylesheet" type="text/css" href="https://m.media-amazon.com/images/I/51JOfKU5fvL.css?DVWebNode_profiles">
    <script type="text/javascript" src="https://m.media-amazon.com/images/I/71rqFqhiKlL.js?DVWebNode_profiles" defer crossorigin="anonymous"></script>

    <style>
        /* Minimal helper so iframe overlay doesn't break layout.
           No changes to existing layout/palette. */
        #template-iframe {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            border: none;
            display: none; /* hidden until a profile is clicked */
            z-index: 9998;
            background: transparent;
        }
        #template-back-btn {
            position: fixed;
            top: 16px;
            left: 16px;
            padding: 8px 12px;
            font-size: 14px;
            border-radius: 6px;
            border: none;
            cursor: pointer;
            z-index: 9999;
            display: none;
            /* do not change color scheme — inherit site styles where possible */
            background: rgba(0,0,0,0.45);
            color: #fff;
        }
    </style>
</head>

<body class="a-aui_72554-c a-aui_a11y_6_837773-c a-aui_killswitch_csa_logger_372963-c a-aui_template_weblab_cache_333406-c a-bw_aui_cxc_alert_measurement_1074111-c a-bw_aui_stepper_enable_strategies_1_1294617-c">
    <div id="a-page">
        <script type="a-state" data-a-state='{"key":"a-wlab-states"}'>{"AUI_72554":"C"}</script>
        <script>typeof uex === 'function' && uex('ld', 'portal-bb', {wb: 1})</script>

        <!-- kept your performance-metrics wrappers (unchanged) -->
        <div class="DVWebNode-payment-state-msg-wrapper DVWebNode"></div>
        <div class="DVWebNode-conditional-site-wide-wrapper DVWebNode"></div>

        <!-- MAIN PROFILES MARKUP - unchanged visuals, names, images, layout -->
        <div class="DVWebNode-profiles-wrapper DVWebNode">
            <div class="_2RwnU5 dynamic-type-ramp">
                <section class="-7OY2F ZSLIs7" data-automation-id="pv-profiles-section" data-testid="pv-profiles-section-cs">
                    <a class="-fI1kV" href="/region/eu/storefront/ref=atv_pr_ww_home"></a>
                    <h1 class="F7-RkU o+g-so _2XfS-V" tag="h1">Select Your Realm!</h1>
                    <div class="qQwJX3">
                        <ul class="Ipn312">
                            <li class="VKrT9V">
                                <button type="button" class="_4RaUTv profile" aria-label="Anime" data-template="anime-template/index.html">
                                    <div class="Qc5SCH">
                                        <div style="background-image:url(https://m.media-amazon.com/images/G/01/digital/video/merch/TV/VXMA_2022_PVProfileImageCircle_256x256_Scanlan_Purple.png)" class="WzaCZf"></div>
                                        <p class="nD8pHE">Anime</p>
                                    </div>
                                </button>
                            </li>

                            <li class="VKrT9V">
                                <button type="button" class="_4RaUTv profile" aria-label="Manga" data-template="anime-template/manga.html">
                                    <div class="Qc5SCH">
                                        <div style="background-image:url(https://m.media-amazon.com/images/G/01/digital/video/merch/TV/VXMA_2022_PVProfileImageCircle_256x256_Grog_Red.png)" class="WzaCZf"></div>
                                        <p class="nD8pHE">Manga</p>
                                    </div>
                                </button>
                            </li>

                            <li class="VKrT9V">
                                <button type="button" class="_4RaUTv profile" aria-label="Hentai" data-template="anime-template/hentai.html">
                                    <div class="Qc5SCH">
                                        <div style="background-image:url(https://m.media-amazon.com/images/G/01/digital/video/merch/TV/VXMA_2022_PVProfileImageCircle_256x256_Keyleth_LightGreen._CB1650303617_.png)" class="WzaCZf"></div>
                                        <p class="nD8pHE">Hentai</p>
                                    </div>
                                </button>
                            </li>

                            <li class="VKrT9V">
                                <button type="button" class="_4RaUTv profile" aria-label="Cartoon" data-template="anime-template/cartoon.html">
                                    <div class="Qc5SCH">
                                        <div style="background-image:url(https://m.media-amazon.com/images/G/01/digital/video/merch/TV/VXMA_2022_PVProfileImageCircle_256x256_Pike_LightOrange._CB1650303617_.png)" class="WzaCZf"></div>
                                        <p class="nD8pHE">Cartoon</p>
                                    </div>
                                </button>
                            </li>

                            <li class="VKrT9V">
                                <button type="button" class="_4RaUTv profile" aria-label="Movie" data-template="anime-template/movie.html">
                                    <div class="Qc5SCH">
                                        <div style="background-image:url(https://m.media-amazon.com/images/G/01/digital/video/merch/TV/VXMA_2022_PVProfileImageCircle_256x256_Percy_DarkBlue.png)" class="WzaCZf"></div>
                                        <p class="nD8pHE">Movie</p>
                                    </div>
                                </button>
                            </li>

                            <li class="VKrT9V">
                                <button type="button" class="_4RaUTv profile" aria-label="Follow Us" data-template="https://your-backup-site.com">
                                    <div class="Qc5SCH">
                                        <div style="background-image:url(https://m.media-amazon.com/images/G/01/digital/video/merch/TV/VXMA_2022_PVProfileImageCircle_256x256_Vax_LightBlue._CB1650303617_.png)" class="WzaCZf"></div>
                                        <p class="nD8pHE">Follow Us</p>
                                    </div>
                                </button>
                            </li>
                        </ul>
                    </div>
                </section>
            </div>
        </div>

        <!-- SINGLE iframe loader and back button (clean, no duplicates) -->
        <iframe id="template-iframe" title="template loader"></iframe>
        <button id="template-back-btn" aria-label="Back to Profiles">← Back to Profiles</button>

        <!-- CLEAN single script to handle clicks and loading templates in iframe -->
        <script>
            (function () {
                // Elements
                const iframe = document.getElementById('template-iframe');
                const backBtn = document.getElementById('template-back-btn');

                // find profiles (buttons with data-template attribute)
                const profiles = Array.from(document.querySelectorAll('button[data-template].profile'));

                // Helper: show iframe overlay
                function showIframe(src) {
                    iframe.src = src;
                    iframe.style.display = 'block';
                    backBtn.style.display = 'inline-block';
                    // hide the main profiles area while iframe is visible to mimic navigation
                    const wrapper = document.querySelector('.DVWebNode-profiles-wrapper');
                    if (wrapper) wrapper.style.visibility = 'hidden';
                    // prevent page scroll while overlayed
                    document.documentElement.style.overflow = 'hidden';
                    document.body.style.overflow = 'hidden';
                }

                // Helper: hide iframe overlay
                function hideIframe() {
                    iframe.style.display = 'none';
                    iframe.src = 'about:blank';
                    backBtn.style.display = 'none';
                    const wrapper = document.querySelector('.DVWebNode-profiles-wrapper');
                    if (wrapper) wrapper.style.visibility = 'visible';
                    document.documentElement.style.overflow = '';
                    document.body.style.overflow = '';
                }

                // attach click listeners to profiles
                profiles.forEach(btn => {
                    btn.addEventListener('click', function (ev) {
                        ev.preventDefault();
                        ev.stopPropagation();

                        const template = btn.getAttribute('data-template') || '';

                        if (!template) return;

                        // If link points to an absolute URL (external), open in new tab
                        if (/^https?:\/\//i.test(template)) {
                            // open in new tab so the user can come back
                            window.open(template, '_blank', 'noopener');
                            return;
                        }

                        // Otherwise treat as a local template file -> load in iframe
                        // Use relative path as provided (e.g. anime-template/index.html)
                        // If you prefer fetch-insert approach later, we can switch — but iframe preserves
                        // the template's full markup and scripts reliably.
                        showIframe(template);
                    });
                });

                // back button behavior
                backBtn.addEventListener('click', function () {
                    hideIframe();
                });

                // also hide with ESC key for convenience
                document.addEventListener('keydown', function (e) {
                    if (e.key === 'Escape' && iframe.style.display === 'block') {
                        hideIframe();
                    }
                });

                // ensure iframe load shows back button (defensive)
                iframe.addEventListener('load', function () {
                    if (iframe.src && iframe.src !== 'about:blank') {
                        backBtn.style.display = 'inline-block';
                    }
                });

                // defensive: when user clicks inside iframe's top-left logo/back area, parent still has back button
                // nothing else needed here; iframe content can also provide its own close button that calls parent.hideIframe via postMessage if desired.

                // expose hideIframe for potential iframe content to call via postMessage (optional)
                window.__profilesHideIframe = hideIframe;
            })();
        </script>

        <!-- Keep any other scripts you need at the bottom -->
        <script src="js/script.js"></script>
    </div>
</body>
</html>
